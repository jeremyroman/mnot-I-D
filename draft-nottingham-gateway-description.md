---
title: HTTP Gateway Description Format
abbrev:
docname: draft-nottingham-gateway-description-latest
date: {DATE}
category: std

ipr: trust200902
keyword: Internet-Draft

stand_alone: yes
smart_quotes: no
pi: [toc, tocindent, sortrefs, symrefs, strict, compact, comments, inline]

venue:
  home: "https://mnot.github.io/I-D/"
  repo: "https://github.com/mnot/I-D/labels/gateway-description"

github-issue-label: gateway-description

author:
 -
    ins: M. Nottingham
    name: Mark Nottingham
    organization:
    postal:
      - Prahran
    country: Australia
    email: mnot@mnot.net
    uri: https://www.mnot.net/

normative:
  HTTP: RFC9110
  INVALIDATION: I-D.nottingham-http-invalidation
  BEARER: RFC6750
  TARGETED: RFC9213
  JSON: RFC8259

--- abstract

TBD

--- middle


# Introduction

This document specifies a format that describes the capabilities and configuration of a cache's invalidation API, so that tools used by the origin server can easily consume it.


## Notational Conventions

{::boilerplate bcp14-tagged}


# Gateway Description Format {#desc-format}

To allow origin servers and tools that they use to be easily configured, this document defines a Gateway Description Format that describes the configuration of an HTTP gateway (commonly, a "reverse proxy" or content delivery network). It is intended to be generated by gateways and made available out-of-band to origin servers using them.

The format is based upon JSON {{JSON}}. The root object can contain members with the following names and values:

* "generated": a string containing the date that the description was generated, in the IMF-fixdate format described in {{Section 5.6.7 of HTTP}}
* "description": a string containing a human-readable description of the gateway
* "invalidation": an invalidation description object {{INVALIDATION}} (see below)
* "api-authentication": an API authentication description object (see below)
* "targeted-cc": an array of strings indicating the targeted cache-control header field(s) {{TARGETED}} supported by the gateway, in order of precedence (i.e., first entry overrides later entries)
* "vendor": an object containing arbitrary, vendor-specific extensions

Invalidation description objects can contain the following members and values:

* "uri": a string conveying the URI of the Invalidation Resource ({{Section 2 of INVALIDATION}})
* "selectors": an array of strings indicating the selectors ({{Section 3.1 of INVALIDATION}}) that the Invalidation Resource supports
* "purge": a boolean indicating whether the Invalidation Resource supports the "purge" member in requests (see {{Section 3 of INVALIDATION}})
* "p95-latency": an integer indicating the number of milliseconds that 95% of invalidation requests should be fully applied to the scope indicated by the description.

API authentication objects can contain the following members and values:

* "bearer": a string containing a token to be used to authenticate to the API(s) described in the document, using Bearer HTTP authentication as described in {{Section 2.1 of BEARER}}

Unrecognised members of all of these objects MUST be ignored. New members may be introduced to them by updating this specification.

For example:

~~~ json
{
  "description": "The Example CDN",
  "generated": "",
  "invalidation": {
    "uri": "https://api.cdn.example.com/invalidate",
    "selectors": ["uri", "uri-prefix", "group"],
    "purge": true,
    "p95-latency": 2000
  },
  "targeted-cc": [
    "ExampleCDN-Cache-Control",
    "CDN-Cache-Control"
  ],
  "api-authentication": {
    "bearer": "mF_9.B5f-4.1JqM"
  }
}
~~~


# IANA Considerations

# Security Considerations


--- back

